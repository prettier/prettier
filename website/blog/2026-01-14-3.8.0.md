---
authors: "ðŸš§"
title: "Prettier ðŸš§"
---

ðŸš§ Write an introduction here.

<!-- truncate -->

## Highlights

### Markdown

#### Upgrade parser to latest micromark ([#18277](https://github.com/prettier/prettier/pull/18277) by [@seiyab](https://github.com/seiyab), [@j-f1](https://github.com/j-f1), [@fisker](https://github.com/fisker)) {#change-18277}

We've upgraded Prettier's Markdown parser from the outdated remark-parse v8 to the modern micromark v4. This upgrade significantly enhances CommonMark and GFM compliance, resolves numerous long-standing parsing bugs, and lays a stronger foundation for future enhancements.

A huge thank you to @seiyab for their tremendous effort in driving this major upgrade!

## Other Changes

### JavaScript

#### Remove redundant parentheses in "return statement" ([#18142](https://github.com/prettier/prettier/pull/18142) by [@fisker](https://github.com/fisker)) {#change-18142}

<!-- prettier-ignore -->
```jsx
// Input
function sequenceExpressionInside() {
  return ( // Reason for a
    a, b
  );
}

// Prettier 3.7
function sequenceExpressionInside() {
  return (
    // Reason for a
    (a, b)
  );
}

// Prettier 3.8
function sequenceExpressionInside() {
  return (
    // Reason for a
    a, b
  );
}
```

#### Fix alignment in embedded template interpolations ([#18380](https://github.com/prettier/prettier/pull/18380) by [@fisker](https://github.com/fisker)) {#change-18380-2}

<!-- prettier-ignore -->
```jsx
// Input
string = `
  .class {
    flex-direction: column${
		long_cond && long_cond && long_cond
  		? "-reverse" :
		""
    };
  }
`;
css = css`
  .class {
    flex-direction: column${
		long_cond && long_cond && long_cond
  		? "-reverse" :
		""
    };
  }
`;

// Prettier 3.7
string = `
  .class {
    flex-direction: column${
      long_cond && long_cond && long_cond ? "-reverse" : ""
    };
  }
`;
css = css`
  .class {
    flex-direction: column${long_cond && long_cond && long_cond
        ? "-reverse"
        : ""};
  }
`;

// Prettier 3.8
string = `
  .class {
    flex-direction: column${
      long_cond && long_cond && long_cond ? "-reverse" : ""
    };
  }
`;
css = css`
  .class {
    flex-direction: column${
      long_cond && long_cond && long_cond ? "-reverse" : ""
    };
  }
`;
```

#### Avoid linebreaks in embedded template interpolations ([#18380](https://github.com/prettier/prettier/pull/18380) by [@fisker](https://github.com/fisker)) {#change-18380}

<!-- prettier-ignore -->
```jsx
// Input
string = /* Comment */ `
  <div>${long_cond && long_cond && long_cond && long_cond && long_cond ? "content" : ""}</div>
`;
html = /* HTML */ `
  <div>${long_cond && long_cond && long_cond && long_cond && long_cond ? "content" : ""}</div>
`;

// Prettier 3.7
string = /* Comment */ `
  <div>${long_cond && long_cond && long_cond && long_cond && long_cond ? "content" : ""}</div>
`;
html = /* HTML */ `
  <div>
    ${long_cond && long_cond && long_cond && long_cond && long_cond
      ? "content"
      : ""}
  </div>
`;

// Prettier 3.8
string = /* Comment */ `
  <div>${long_cond && long_cond && long_cond && long_cond && long_cond ? "content" : ""}</div>
`;
html = /* HTML */ `
  <div>
    ${long_cond && long_cond && long_cond && long_cond && long_cond ? "content" : ""}
  </div>
`;
```

#### Improve logical not expression print ([#18397](https://github.com/prettier/prettier/pull/18397), [#18401](https://github.com/prettier/prettier/pull/18401) by [@fisker](https://github.com/fisker)) {#change-18397}

- Fixed inner logical expression can be double parenthesized in some case.
- Inline the expression in `if`/`while`/`do..while` condition, to reduce diff when changing condition to negated value.

<!-- prettier-ignore -->
```jsx
// Input
if (!(
  // `import("foo")`
  node.type === "ImportExpression" ||
  // `type foo = import("foo")`
  node.type === "TSImportType"
)) {
} else if (
  // `import("foo")`
  node.type === "ImportExpression" ||
  // `type foo = import("foo")`
  node.type === "TSImportType" 
) {
}

// Prettier 3.7
if (
  !(
    // `import("foo")`
    (
      node.type === "ImportExpression" ||
      // `type foo = import("foo")`
      node.type === "TSImportType"
    )
  )
) {
} else if (
  // `import("foo")`
  node.type === "ImportExpression" ||
  // `type foo = import("foo")`
  node.type === "TSImportType"
) {
}

// Prettier 3.8
if (!(
  // `import("foo")`
  node.type === "ImportExpression" ||
  // `type foo = import("foo")`
  node.type === "TSImportType"
)) {
} else if (
  // `import("foo")`
  node.type === "ImportExpression" ||
  // `type foo = import("foo")`
  node.type === "TSImportType"
) {
}
```

_This code example above is [a real world case](https://github.com/prettier/prettier/blob/edb53db4b1ec326d3f0f4fb683f56c83beefeba4/src/language-js/print/call-expression.js#L135-L155) right here in the Prettier codebase_

#### Remove unexpected space inserted before expression in CSS selectors ([#18460](https://github.com/prettier/prettier/pull/18460) by [@kovsu](https://github.com/kovsu)) {#change-18460}

<!-- prettier-ignore -->
```js
// Input
css`foo:${bar} {}`

// Prettier 3.7
css`
  foo: ${bar} {

  }
`;

// Prettier 3.8
css`
  foo:${bar} {
  }
`;
```

#### Keep iife function comments in parentheses ([#18538](https://github.com/prettier/prettier/pull/18538) by [@fisker](https://github.com/fisker)) {#change-18538}

<!-- prettier-ignore -->
```jsx
// Input
const a = (
  /**
   * @param {number} foo
   * @return {number}
   */
  function (foo) {
    return foo + 1;
  }
)(1);

// Prettier 3.7
const a = /**
 * @param {number} foo
 * @return {number}
 */
(function (foo) {
  return foo + 1;
})(1);

// Prettier 3.8
const a = (
  /**
   * @param {number} foo
   * @return {number}
   */
  function (foo) {
    return foo + 1;
  }
)(1);
```

#### Fix comment print for parenthesized callee ([#18540](https://github.com/prettier/prettier/pull/18540) by [@fisker](https://github.com/fisker)) {#change-18540}

<!-- prettier-ignore -->
```jsx
// Input
const a = (
  	function(){}
  	/* comment for callee */
  )(),
  b = (
    function(){}
  )(/* comment for call */)

// Prettier 3.7
const a = (function () {})(),
  /* comment for callee */
  b = (function () {})(/* comment for call */);

// Prettier 3.8
const a = (
    function () {}
    /* comment for callee */
  )(),
  b = (function () {})(/* comment for call */);
```

#### Preserve trailing double spaces in JSDoc ([#18594](https://github.com/prettier/prettier/pull/18594) by [@seiyab](https://github.com/seiyab)) {#change-18594}

Some tools treat these spaces as meaningful.

```bash
await require('prettier').format('/**\n * With 2 spaces   \n */', {parser: 'babel'});

# Prettier 3.7
// -> '/**\n * With 2 spaces\n */\n'

# Prettier 3.8
// -> '/**\n * With 2 spaces  \n */\n'
```

#### Improve comment handling around empty call argument list ([#18615](https://github.com/prettier/prettier/pull/18615) by [@fisker](https://github.com/fisker)) {#change-18615-2}

<!-- prettier-ignore -->
```jsx
// Input
call
// line comment
();
call(// line comment
);
call(
  // line comment
);

call
/* block comment */
();
call(/* block comment */
);
call(
  /* block comment */
);

// Prettier 3.7
call();
// line comment
call(); // line comment
call();
// line comment

call();
/* block comment */
call /* block comment */();
call();
/* block comment */

// Prettier 3.8
call
// line comment
();
call(
  // line comment
);
call(
  // line comment
);

call
/* block comment */
();
call(/* block comment */);
call(/* block comment */);
```

#### Fix unstable comment in call expression ([#18615](https://github.com/prettier/prettier/pull/18615) by [@fisker](https://github.com/fisker)) {#change-18615-3}

<!-- prettier-ignore -->
```jsx
// Input
foo =
  call(
    /* call argument */);

// Prettier 3.7 (First format)
foo =
  call();
  /* call argument */

// Prettier 3.7 (Second format)
foo = call();
/* call argument */

// Prettier 3.8
foo = call(/* call argument */);
```

#### Allow empty call expression argument list with long comments to break ([#18615](https://github.com/prettier/prettier/pull/18615) by [@fisker](https://github.com/fisker)) {#change-18615}

<!-- prettier-ignore -->
```jsx
// Input
call(/* a long long long long long long long long long long long long comment */);
array = [/* a long long long long long long long long long long long long comment */];
object = {/* a long long long long long long long long long long long long comment */};

// Prettier 3.7
call(/* a long long long long long long long long long long long long comment */);
array = [
  /* a long long long long long long long long long long long long comment */
];
object = {
  /* a long long long long long long long long long long long long comment */
};

// Prettier 3.8
call(
  /* a long long long long long long long long long long long long comment */
);
array = [
  /* a long long long long long long long long long long long long comment */
];
object = {
  /* a long long long long long long long long long long long long comment */
};
```

#### Don't force empty array and object with short comments to break ([#18617](https://github.com/prettier/prettier/pull/18617) by [@fisker](https://github.com/fisker)) {#change-18617}

<!-- prettier-ignore -->
```jsx
// Input
const array = [/* comment */]
const object = {/* comment */}

// Prettier 3.7
const array = [
  /* comment */
];
const object = {
  /* comment */
};

// Prettier 3.8
const array = [/* comment */];
const object = {/* comment */};
```

#### Fix dangling comment print in function parameters ([#18623](https://github.com/prettier/prettier/pull/18623) by [@fisker](https://github.com/fisker)) {#change-18623}

<!-- prettier-ignore -->
```jsx
// Input
fn = function(
  // comment  
) {}
arrow = (
  // comment  
) => {}

// Prettier 3.7
fn = function () // comment
{};
arrow = () =>
  // comment
  {};

// Prettier 3.8
fn = function (
  // comment
) {};
arrow = (
  // comment
) => {};
```

### TypeScript

#### Fix linebreak in member chain ([#17251](https://github.com/prettier/prettier/pull/17251) by [@fisker](https://github.com/fisker)) {#change-17251}

<!-- prettier-ignore -->
```tsx
// Input
model = types
  .model({ something: mxSomething })
  .volatile<| "a" | "b">(() => [
    annularThingamabobWrapper,
    octahedralWeevilService,
    cantileveredRhubarbProcessor,
    annularPlatypusGenerator,
  ]);

// Prettier 3.7
model = types
  .model({ something: mxSomething })
  .volatile<
    "a" | "b"
  >(() => [annularThingamabobWrapper, octahedralWeevilService, cantileveredRhubarbProcessor, annularPlatypusGenerator]);

// Prettier 3.8
model = types
  .model({ something: mxSomething })
  .volatile<"a" | "b">(() => [
    annularThingamabobWrapper,
    octahedralWeevilService,
    cantileveredRhubarbProcessor,
    annularPlatypusGenerator,
  ]);
```

#### Fix formatting for new expression with type cast ([#18507](https://github.com/prettier/prettier/pull/18507) by [@fisker](https://github.com/fisker)) {#change-18507}

<!-- prettier-ignore -->
```tsx
// Input
new (require("./webpack/plugins/next-trace-entrypoints-plugin")
  .TraceEntryPointsPlugin as P)({
  rootDir: dir,
});

(
  require("./webpack/plugins/next-trace-entrypoints-plugin")
    .TraceEntryPointsPlugin as P
)({
  rootDir: dir,
});

// Prettier 3.7
new (require("./webpack/plugins/next-trace-entrypoints-plugin")
  .TraceEntryPointsPlugin as P)({
  rootDir: dir,
});

(
  require("./webpack/plugins/next-trace-entrypoints-plugin")
    .TraceEntryPointsPlugin as P
)({
  rootDir: dir,
});

// Prettier 3.8
new (
  require("./webpack/plugins/next-trace-entrypoints-plugin")
    .TraceEntryPointsPlugin as P
)({
  rootDir: dir,
});

(
  require("./webpack/plugins/next-trace-entrypoints-plugin")
    .TraceEntryPointsPlugin as P
)({
  rootDir: dir,
});
```

#### Fix line comments jumping past member expression lookups ([#18522](https://github.com/prettier/prettier/pull/18522) by [@ulrichstark](https://github.com/ulrichstark)) {#change-18522}

Line comments between a member expression object and property were incorrectly moved past subsequent content like `as` expressions.

<!-- prettier-ignore -->
```tsx
// Input
function getClassNameFromPrototypeMethod(container) {
  return ((container // a
    .left as PropertyAccessExpression) // b
    .expression as PropertyAccessExpression) // c
    .expression; // d
}

// Prettier 3.7
function getClassNameFromPrototypeMethod(container) {
  return (
    (
      container.left as PropertyAccessExpression // a
    ).expression as PropertyAccessExpression // b
  ).expression; // c // d
}

// Prettier 3.8
function getClassNameFromPrototypeMethod(container) {
  return (
    (
      container // a
      .left as PropertyAccessExpression
    ) // b
    .expression as PropertyAccessExpression
  ) // c
  .expression; // d
}
```

#### Fix inconsistent formatting of arrow function ([#18589](https://github.com/prettier/prettier/pull/18589) by [@fisker](https://github.com/fisker)) {#change-18589}

<!-- prettier-ignore -->
```tsx
// Input
a.map(() => ({
  name,
}));
a.map(():A => ({
  name,
}));
a.map(():{A} => ({
  name,
}));

// Prettier 3.7
a.map(() => ({
  name,
}));
a.map(
  (): A => ({
    name,
  }),
);
a.map((): { A } => ({
  name,
}));

// Prettier 3.8
a.map(() => ({
  name,
}));
a.map((): A => ({
  name,
}));
a.map((): { A } => ({
  name,
}));
```

#### Improve comment print inside type arguments ([#18619](https://github.com/prettier/prettier/pull/18619) by [@fisker](https://github.com/fisker)) {#change-18619}

<!-- prettier-ignore -->
```tsx
// Input
foo<
  // Comment
  Type
>(
  // Comment
  value
)
foo<
  Type // Comment
>(
)

// Prettier 3.7
foo<// Comment
Type>(
  // Comment
  value,
);
foo<Type>(); // Comment

// Prettier 3.8
foo<
  // Comment
  Type
>(
  // Comment
  value,
);
foo<
  Type // Comment
>();
```

### Flow

#### Add support for Flow match instance patterns and Flow records ([#18511](https://github.com/prettier/prettier/pull/18511) by [@gkz](https://github.com/gkz)) {#change-18511}

<!-- prettier-ignore -->
```jsx
// Input
record R {
  num: number,
}

const x = R {num: 1};

const label = match (x) {
  R {num: 0} => "zero",
  R {num: 1} => "one",
  R {const num} => `${num} items`,
}

// Prettier 3.7
// Unsupported

// Prettier 3.8
// Same as input
```

#### Improve comment format in inexact tuples ([#18616](https://github.com/prettier/prettier/pull/18616) by [@fisker](https://github.com/fisker)) {#change-18616}

<!-- prettier-ignore -->
```jsx
// Input
type A = [// comment
...];
type B = [/* comment */...];

// Prettier 3.7
type A = [...
  // comment
];
type B = [...
  /* comment */
];

// Prettier 3.8
type A = [
  ...// comment
];
type B = [.../* comment */];
```

#### Fix dangling comment print in components ([#18629](https://github.com/prettier/prettier/pull/18629) by [@fisker](https://github.com/fisker)) {#change-18629}

<!-- prettier-ignore -->
```jsx
// Input
component A(
  // comment  
) {}
component B(/* comment */) {}

// Prettier 3.7
component A() // comment
{}
component B /* comment */() {}

// Prettier 3.8
component A(
  // comment
) {}
component B(/* comment */) {}
```

#### Fix dangling comment print in hooks ([#18630](https://github.com/prettier/prettier/pull/18630) by [@fisker](https://github.com/fisker)) {#change-18630}

<!-- prettier-ignore -->
```jsx
// Input
hook A(
  // comment  
) {}
declare hook B(// comment  
  ): void
type C = hook (// comment  
)=> void

// Prettier 3.7
hook A() // comment
{}
declare hook B(): // comment
void;
type C = hook () => // comment
void;

// Prettier 3.8
hook A(
  // comment
) {}
declare hook B(
  // comment
): void;
type C = hook (
  // comment
) => void;
```

### JSON

#### Preserve number and string representation in `json-stringify` parser ([#18405](https://github.com/prettier/prettier/pull/18405) by [@fisker](https://github.com/fisker)) {#change-18405}

Previous versions of Prettier `json-stringify` parser used `JSON.stringify()` to print numbers and strings. This led to the loss of the original value representation in a few rare cases. For example, extremely large or small numbers were rounded, and some special characters were unescaped. Technically, these transformations do not change how JSON values are read, but they are not something a formatter [is concerned about](https://prettier.io/docs/rationale#strings). Prettier 3.8 now keeps the original representation, even if it can be simplified.

<!-- prettier-ignore -->
```jsonc
// Input
[
  "\u00FF",
  1e9999,
  0.4e669999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999969999999006,
  -9223372036854775809,
  1e3,
  {
    1e3: 1,
    1e999999999999999999999999999999: 1,
    1: 1
  }
]

// Prettier 3.7
[
  "Ã¿",
  null,
  null,
  -9223372036854776000,
  1000,
  {
    "1000": 1,
    "Infinity": 1,
    "1": 1
  }
]

// Prettier 3.8
[
  "\u00FF",
  1e9999,
  0.4e669999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999969999999006,
  -9223372036854775809,
  1e3,
  {
    1e3: 1,
    1e999999999999999999999999999999: 1,
    "1": 1
  }
]
```

### SCSS

#### Prevent trailing comma in `if()` function ([#18471](https://github.com/prettier/prettier/pull/18471) by [@kovsu](https://github.com/kovsu)) {#change-18471}

<!-- prettier-ignore -->
```scss
// Input
$value: if(sass(false): 1; else: -1);

// Prettier 3.7
$value: if(
  sass(false): 1; else: -1,
);

// Prettier 3.8
$value: if(sass(false): 1; else: -1);
```

#### Prevent adding trailing comma in math expression within function arguments ([#18530](https://github.com/prettier/prettier/pull/18530) by [@kovsu](https://github.com/kovsu)) {#change-18530}

<!-- prettier-ignore -->
```scss
// Input
@include container($foo: 2 * ($bar + $baz));

// Prettier 3.7
@include container(
  $foo: 2 *
    (
      $bar + $baz,
    )
);

// Prettier 3.8
@include container($foo: 2 * ($bar + $baz));
```

#### Fix comment print in maps ([#18535](https://github.com/prettier/prettier/pull/18535) by [@kovsu](https://github.com/kovsu)) {#change-18535}

<!-- prettier-ignore -->
```scss
// Input
$map: (
  // comment
);

// Prettier 3.7
$map: (// comment);

// Prettier 3.8
$map: (
  // comment
);
```

### HTML

#### Fix a bug around unicode in front matter ([#18453](https://github.com/prettier/prettier/pull/18453) by [@seiyab](https://github.com/seiyab)) {#change-18453}

<!-- prettier-ignore -->
```html
<!-- Input -->
---
title: ðŸ˜„
---

<!-- comment -->

<!-- Prettier 3.7 -->
---
title: ðŸ˜„
---


<!-- comment --

<!-- Prettier 3.8 -->
---
title: ðŸ˜„
---

<!-- comment -->
```

### Angular

#### Don't print attribute values that are single template or string literals on new lines ([#18378](https://github.com/prettier/prettier/pull/18378) by [@ravindUwU](https://github.com/ravindUwU)) {#change-18378}

<!-- prettier-ignore -->
```html
<!-- Input -->
<component
  [property]="`
    template
    literal
  `"
/>

<!-- Prettier 3.7 -->
<component
  [property]="
    `
    template
    literal
  `
  "
/>

<!-- Prettier 3.8 -->
<component
  [property]="`
    template
    literal
  `"
/>
```

#### Add support for multiple switch cases ([#18593](https://github.com/prettier/prettier/pull/18593) by [@fisker](https://github.com/fisker)) {#change-18593}

This feature added in Angular v21.1.

<!-- prettier-ignore -->
```html
<!-- Input -->
@switch (foo) {
  @case (0)
  @case (1) {
    <div>case 0 or 1</div>
  }
}

<!-- Prettier 3.7 -->
SyntaxError: Incomplete block "case". If you meant to write the @ character, you should use the "&#64;" HTML entity instead. (2:3)

<!-- Prettier 3.8 -->
@switch (a) {
  @case (0)
  @case (1) {
    <div>case 0 or 1</div>
  }
}
```

#### Support spread element in array and object literals ([#18596](https://github.com/prettier/prettier/pull/18596), [#18636](https://github.com/prettier/prettier/pull/18636) by [@prettier](https://github.com/prettier)) {#change-18596}

<!-- prettier-ignore -->
```html
<!-- Input -->
<component
  [a]="[   ...a]"
  [b]="{...bar  }"
  [c]="call(  ...baz)"
/>

<!-- Prettier 3.7 -->
<component [a]="[   ...a]" [b]="{...bar  }" [c]="call(  ...baz)" />

<!-- Prettier 3.8 -->
<component [a]="[...a]" [b]="{ ...bar }" [c]="call(...baz)" />
```

### GraphQL

#### Fix comment print ([#18581](https://github.com/prettier/prettier/pull/18581) by [@fisker](https://github.com/fisker)) {#change-18581}

<!-- prettier-ignore -->
```gql
# Input
query {
  search(filters: {
    # TODO
  }) {
      id
  }
}

# Prettier 3.7
Error: Comment "TODO" was not printed. Please report this error!

# Prettier 3.8
query {
  search(
    filters: {
      # TODO
    }
  ) {
    id
  }
}
```

#### Allow interfaces to break ([#18582](https://github.com/prettier/prettier/pull/18582) by [@fisker](https://github.com/fisker)) {#change-18582}

<!-- prettier-ignore -->
```gql
# Input
type Foo implements InterfaceOne & InterfaceTwo & InterfaceThree & InterfaceFour & InterfaceFive & InterfaceSix {
  id: ID!
}

# Prettier 3.7
type Foo implements InterfaceOne & InterfaceTwo & InterfaceThree & InterfaceFour & InterfaceFive & InterfaceSix {
  id: ID!
}

# Prettier 3.8
type Foo implements InterfaceOne &
  InterfaceTwo &
  InterfaceThree &
  InterfaceFour &
  InterfaceFive &
  InterfaceSix {
  id: ID!
}
```

### Markdown

#### Support setext headings ([#18473](https://github.com/prettier/prettier/pull/18473) by [@fisker](https://github.com/fisker)) {#change-18473}

<!-- prettier-ignore -->
```md
<!-- Input -->
Setext Heading 1
================

Setext Heading 2
----------------

Multiline
Setext
Heading
-------

<!-- Prettier 3.7 -->
# Setext Heading 1

## Setext Heading 2

Multiline
Setext
Heading

---

<!-- Prettier 3.8 -->
Setext Heading 1
================

Setext Heading 2
----------------

Multiline
Setext
Heading
-------
```

#### Support formatting Angular syntax in code block ([#18519](https://github.com/prettier/prettier/pull/18519) by [@fisker](https://github.com/fisker)) {#change-18519}

<!-- prettier-ignore -->
````md
<!-- Input -->
```angular-ts
@Component({
  selector: 'app-root',
  template: `<div
>Welcome to {{
  Angular}}! </div>`,
})
export class App {}
```

```angular-html
<div
>Welcome to {{
  Angular}}! </div>
```

<!-- Prettier 3.7 -->
Same as input

<!-- Prettier 3.8 -->
```angular-ts
@Component({
  selector: "app-root",
  template: `<div>Welcome to {{ Angular }}!</div>`,
})
export class App {}
```

```angular-html
<div>Welcome to {{ Angular }}!</div>
```
````

### YAML

#### Fix mapping format when the key wraps ([#18330](https://github.com/prettier/prettier/pull/18330) by [@kovsu](https://github.com/kovsu)) {#change-18330}

<!-- prettier-ignore -->
```yaml
# Input
long long long long long long long long long long long long long long long long long long key: bar

# Prettier 3.7 (--prose-wrap=always)
long long long long long long long long long long long long long long long long
long long key: bar

# Prettier 3.8 (--prose-wrap=always)
? long long long long long long long long long long long long long long long
  long long long key
: bar
```

#### Fix block value ends with whitespace ([#18331](https://github.com/prettier/prettier/pull/18331) by [@kovsu](https://github.com/kovsu)) {#change-18331}

```js
import { inspect } from "node:util";
import * as prettier from "prettier";

const input = "foo: |\n  x\n   ";
const output = await prettier.format(input, { parser: "yaml" });
console.log(inspect(output));

// Prettier 3.7
//-> 'foo: |\n  x\n\n'

// Prettier 3.8
//-> 'foo: |\n  x\n'
```

### CLI

#### Fix crashes on formatting directory names that have special characters ([#18452](https://github.com/prettier/prettier/pull/18452) by [@fisker](https://github.com/fisker)) {#change-18452}

<!-- prettier-ignore -->
```sh
prettier . --check

# Prettier 3.7
[error] Invalid configuration for file "<CWD>\test\username[repo-name]\.editorconfig":
[error] Invalid regular expression: /^(?=.)username[repo-name]$/: Range out of order in character class

# Prettier 3.8
Checking formatting...
[warn] test/username[repo-name]/test.js
[warn] Code style issues found in the above file. Run Prettier with --write to fix.
```
